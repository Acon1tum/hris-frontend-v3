<app-header *ngIf="publicMode" [publicMode]="publicMode" class="job-portal-header"></app-header>
<div *ngIf="publicMode" style="height: 0px;"></div>
<div class="jobstreet-portal-bg">
  <!-- Search Bar Section -->
  <section class="search-section">
    <form class="search-form" (submit)="$event.preventDefault()">
      <div class="search-fields">
        <div class="search-group">
          <label>What</label>
          <input type="text" placeholder="Enter keywords" />
        </div>
        <div class="search-group">
          <label>Any classification</label>
          <select>
            <option>All</option>
            <option>IT/Software</option>
            <option>Customer Service</option>
            <option>Sales</option>
            <option>Healthcare</option>
          </select>
        </div>
        <div class="search-group">
          <label>Where</label>
          <input type="text" placeholder="Enter suburb, city, or region" />
        </div>
        <button class="seek-btn" type="submit">SEEK</button>
      </div>
      <div class="filter-chips">
        <button type="button" class="chip">All work types</button>
        <button type="button" class="chip">All remote options</button>
        <button type="button" class="chip">Paying P0</button>
        <button type="button" class="chip">to P150K</button>
        <button type="button" class="chip">Listed any time</button>
      </div>
    </form>
  </section>

  <!-- Main Content: Job List & Details -->
  <section class="main-content">
    <div class="job-list-panel">
      <div class="job-list-tabs">
        <button class="tab active">All jobs</button>
        <button class="tab">New to you</button>
      </div>
      <div *ngIf="loading" class="loading-spinner">Loading jobs...</div>
      <div *ngIf="error" class="error-message">{{ error }}</div>
      <div class="job-cards" *ngIf="!loading && !error">
        <div class="job-card" *ngFor="let job of jobs" (click)="selectJob(job)" [class.selected]="selectedJob?.id === job.id">
          <div class="job-card-header">
            <div class="job-title">{{ job.position_title }}</div>
            <!-- Optionally show logo if available -->
          </div>
          <div class="job-company">{{ job.department?.department_name }}</div>
          <div class="job-location">{{ job.employment_type }}</div>
          <div class="job-salary">{{ job.salary_range }}</div>
          <ul class="job-tags">
            <li>{{ job.qualifications }}</li>
          </ul>
          <div class="job-meta">
            <span class="job-date">Deadline: {{ job.application_deadline | date }}</span>
            <span class="bookmark material-symbols-outlined">bookmark</span>
          </div>
        </div>
      </div>
    </div>
    <div class="job-details-panel">
      <ng-container *ngIf="selectedJob; else placeholder">
        <div class="job-card job-details-card">
          <div class="job-card-header">
            <div class="job-title">{{ selectedJob.position_title }}</div>
            <!-- Optionally show logo if available -->
          </div>
          <div class="job-company">{{ selectedJob.department?.department_name }}</div>
          <div class="job-location">{{ selectedJob.employment_type }}</div>
          <div class="job-salary">{{ selectedJob.salary_range }}</div>
          <ul class="job-tags">
            <li>{{ selectedJob.qualifications }}</li>
          </ul>
          <div class="job-meta">
            <span class="job-date">Deadline: {{ selectedJob.application_deadline | date }}</span>
            <span class="bookmark material-symbols-outlined">bookmark</span>
          </div>
          <div class="job-description">
            <strong>Description:</strong>
            <div>{{ selectedJob.job_description }}</div>
          </div>
        </div>
      </ng-container>
      <ng-template #placeholder>
        <div class="job-details-placeholder">
          <div class="placeholder-img"></div>
          <h3>Select a job</h3>
          <p>Display details here</p>
        </div>
      </ng-template>
    </div>
  </section>
</div> 